import{r as p,A as u,u as f,j as s,B as w,s as j,f as n,i as y,a as N,b as I}from"./index-g3bv0qI7.js";import{F as r,I as m}from"./index-CEuo6pbn.js";import{T as L}from"./index-B-_eiK6q.js";function _(){const[i,e]=p.useState(!1),{message:a}=u.useApp(),t=f(),l={email:"example@example.com",password:"testtest"},o=async h=>{const{email:d,password:g}=h;e(!0);try{await j(n,d,g),t("/"),a.success("登录成功")}catch(x){a.error("登录失败"),console.warn("登录失败",x)}e(!1)};return s.jsx(s.Fragment,{children:s.jsxs(r,{name:"login",className:"w-400px",size:"large",initialValues:l,onFinish:o,children:[s.jsx(r.Item,{name:"email",rules:[{required:!0,message:""}],children:s.jsx(m,{placeholder:"输入您的电子邮箱...",className:"h-50px"})}),s.jsx(r.Item,{name:"password",rules:[{required:!0,message:""}],children:s.jsx(m,{type:"password",placeholder:"输入您的密码...",className:"h-50px"})}),s.jsx(r.Item,{children:s.jsx(w,{type:"primary",htmlType:"submit",loading:i,className:"h-50px",block:!0,children:"登录"})})]})})}const c={"login-page":"_login-page_3pwhi_1","login-title":"_login-title_3pwhi_7","login-picture":"_login-picture_3pwhi_10"},v=()=>{const{message:i}=u.useApp(),e=new URL(location.href),a=e.searchParams.get("eml"),t=e.searchParams.get("pwd"),l=async()=>{if(y(n,location.href)!==!1&&a&&t)try{await N(n,a,location.href),await I(n.currentUser,t),i.success("邮箱验证通过，注册成功")}catch(o){i.error("验证链接失败"),console.warn(o)}};p.useEffect(()=>{l()},[])};function P(){return v(),s.jsx("div",{className:c["login-page"],children:s.jsxs("div",{className:"flex items-center self-center",children:[s.jsxs("div",{className:"mr-80px",children:[s.jsx(L.Title,{level:2,className:c["login-title"],children:"登录"}),s.jsx(_,{})]}),s.jsx("div",{className:c["login-picture"]})]})})}export{P as default};
